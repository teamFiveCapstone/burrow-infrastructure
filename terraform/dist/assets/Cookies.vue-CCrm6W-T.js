import{d as g,A as N,B as U,R as V,bn as B,f as v,b as c,r as K,E as A,S as i,e as n,j as b,Z as f,h as k,af as O,L as R,ah as q,Q as F,bi as L,a9 as Z,o as z,aa as P,c as M,U as Q,X as T,n as W,a2 as $}from"./index-D7a02O2S.js";import{r as X}from"./EmptyState.vue-PSWxMpUe.js";import{m as G,g as H}from"./SidebarButton.vue-DMbRgK4f.js";import{_ as J,p as Y}from"./SidebarListElement.vue-BPFdkZbi.js";import{u as ee}from"./ViewLayout.vue-CBwj-9tp.js";import{x as ae}from"./ViewLayoutContent.vue-BVdqgdTB.js";import{b as oe}from"./ViewLayoutSection.vue-vG1nOkC2.js";import{q as se}from"./Form.vue-2NKl87D0.js";import{h as te,E as y}from"./CommandActionInput.vue-CM6RavLv.js";import"./ScalarHotkey.vue-DuEZeTSm.js";import"./ScalarAsciiArt.vue-C8IO1xrC.js";import"./DeleteSidebarListElement.vue-BFxO_Qyx.js";const le=g({__name:"CookieForm",setup(x){const{activeCookieId:d}=N(),{cookies:r,cookieMutators:p}=U(),o=[{label:"Name",key:"name",placeholder:"session_id"},{label:"Value",key:"value",placeholder:"my-cookie-session-id"},{label:"Domain",key:"domain",placeholder:"example.com"}],m=V(()=>r[d.value]||B.parse({name:"",value:"",domain:"",path:""})),h=(l,e)=>{p.edit(d.value,l,e)};return(l,e)=>(c(),v(se,{data:m.value,onUpdate:h,options:o},null,8,["data"]))}}),ie={class:"flex h-8 items-start gap-2 text-sm"},ue={class:"flex h-8 items-start gap-2 text-sm"},ne={class:"flex h-8 items-start gap-2 text-sm"},de=g({__name:"CookieModal",props:{state:{}},emits:["cancel","submit"],setup(x,{emit:d}){const r=x,p=d,o=K({name:"",value:"",domain:""}),{toast:m}=R(),h=()=>{if(!o.value.name||!o.value.value){m("Please fill in all fields before adding a cookie.","error");return}p("submit",o.value),r.state.hide()};return A(()=>r.state.open,l=>{l&&(o.value={name:"",value:"",domain:""})}),(l,e)=>(c(),v(k(O),{size:"xs",state:l.state,title:"Add Cookie"},{default:i(()=>[n(te,{disabled:!o.value.name||!o.value.value,onCancel:e[3]||(e[3]=u=>p("cancel")),onSubmit:h},{submit:i(()=>[...e[7]||(e[7]=[f("Add Cookie",-1)])]),default:i(()=>[b("div",ie,[e[4]||(e[4]=f(" Name: ",-1)),n(y,{modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=u=>o.value.name=u),autofocus:"",class:"!p-0",placeholder:"session_id"},null,8,["modelValue"])]),b("div",ue,[e[5]||(e[5]=f(" Value: ",-1)),n(y,{modelValue:o.value.value,"onUpdate:modelValue":e[1]||(e[1]=u=>o.value.value=u),autofocus:"",class:"!p-0",placeholder:"my-cookie-session-id"},null,8,["modelValue"])]),b("div",ne,[e[6]||(e[6]=f(" Domain: ",-1)),n(y,{modelValue:o.value.domain,"onUpdate:modelValue":e[2]||(e[2]=u=>o.value.domain=u),autofocus:"",class:"!p-0",placeholder:"example.com"},null,8,["modelValue"])])]),_:1},8,["disabled"])]),_:1},8,["state"]))}}),me=q(de,[["__scopeId","data-v-694018d6"]]),ce={class:"flex-1"},re={class:"relative mb-[.5px] last:mb-0"},we=g({__name:"Cookies",setup(x){const{cookies:d,cookieMutators:r,events:p,workspaceMutators:o}=U(),{activeWorkspace:m,activeCookieId:h}=N(),l=F(),e=L(),u=Z(),D=t=>{const s=B.parse({name:t.name,value:t.value,domain:t.domain,path:"/"});r.add(s),o.edit(m.value?.uid,"cookies",[...m.value?.cookies??[],s.uid]),l.push({name:"cookies",params:{cookies:s.uid}})},E=t=>{r.delete(t),o.edit(m.value?.uid,"cookies",[...(m.value?.cookies??[]).filter(a=>a!==t)]);const s=Object.values(d).filter(a=>a.uid!==t);if(s.length>0){const a=s[s.length-1];a&&l.push(a.uid)}else l.push({name:"cookies",params:{[$.Cookies]:"default"}})},C=()=>{u.show()},w=t=>{t?.createNew&&e.name==="cookies"&&C()},S=(t,s)=>{const a={name:"cookies",params:{workspace:m.value?.uid??"default",cookies:s}};if(t.metaKey){const _=l.resolve(a).href;window.open(_,"_blank");return}l.push(a)};z(()=>p.hotKeys.on(w)),P(()=>p.hotKeys.off(w));const j=V(()=>d[h.value]),I=V(()=>Object.keys(d).length>0&&j.value);return A(()=>e.query.openCookieModal,t=>{t==="true"&&C()},{immediate:!0}),(t,s)=>(c(),v(ee,null,{default:i(()=>[n(k(G),{title:"Cookies"},{content:i(()=>[b("div",ce,[n(J,null,{default:i(()=>[(c(!0),M(Q,null,T(Object.values(k(d)),a=>(c(),M("li",{key:a.uid,class:"gap-1/2 flex flex-col"},[b("div",re,[(c(),v(Y,{key:a.uid,class:"text-xs",isDeletable:"",to:{name:"cookies",params:{[k($).Cookies]:a.uid}},type:"cookies",variable:{name:a.name,uid:a.uid},warningMessage:"Are you sure you want to delete this cookie?",onClick:W(_=>S(_,a.uid),["prevent"]),onDelete:_=>E(a.uid)},null,8,["to","variable","onClick","onDelete"]))])]))),128))]),_:1})])]),button:i(()=>[n(H,{click:C,hotkey:"N"},{title:i(()=>[...s[1]||(s[1]=[f(" Add Cookie ",-1)])]),_:1})]),_:1}),n(ae,{class:"flex-1"},{default:i(()=>[I.value?(c(),v(oe,{key:0,class:"*:border-b-0"},{title:i(()=>[...s[2]||(s[2]=[f("Edit Cookie",-1)])]),default:i(()=>[n(le)]),_:1})):(c(),v(X,{key:1}))]),_:1}),n(me,{state:k(u),onCancel:s[0]||(s[0]=a=>k(u).hide()),onSubmit:D},null,8,["state"])]),_:1}))}});export{we as default};
