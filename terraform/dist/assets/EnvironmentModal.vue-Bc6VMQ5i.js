import{d as V,r as f,R as D,E as I,c as k,b as n,g as b,U as B,aI as _,x as d,f as x,h as v,a0 as w,j as u,X as U,w as N,i as $,e as p,a6 as M,S as m,af as j,B as W,Z as L,a$ as P,T as S,t as R,L as A}from"./index-D7a02O2S.js";import{a as J}from"./DeleteSidebarListElement.vue-BFxO_Qyx.js";import{h as X,E as Z}from"./CommandActionInput.vue-CM6RavLv.js";const q=["onClick"],G=["placeholder"],T=V({__name:"EnvironmentColors",props:{activeColor:{},selector:{type:Boolean,default:!1}},emits:["select"],setup(g,{emit:y}){const l=g,C=y,a=f(""),i=f(null),c=f(!1),s=f(!1),o=[{color:"#FFFFFF"},{color:"#EF0006"},{color:"#EDBE20"},{color:"#069061"},{color:"#FB892C"},{color:"#0082D0"},{color:"#5203D1"},{color:"#FFC0CB"}],h=D(()=>l.activeColor&&!o.some(e=>e.color===l.activeColor)||a.value?`background-color: ${l.activeColor||a.value};`:"background: linear-gradient(to right, rgb(235, 87, 87), rgb(242, 201, 76), rgb(76, 183, 130), rgb(78, 167, 252), rgb(250, 96, 122));"),F=()=>{c.value=!c.value,l.selector&&(s.value=!1),M(()=>{i.value&&i.value.focus()})};I(a,e=>{e&&!e.startsWith("#")&&(a.value=`#${e}`),c.value=!0});const z=()=>{l.selector&&(s.value=!s.value)},E=e=>{C("select",e),l.selector&&(s.value=!1)};return(e,t)=>(n(),k("div",null,[c.value?b("",!0):(n(),k(B,{key:0},[l.selector&&!s.value?(n(),k("div",{key:0,class:d(["flex cursor-pointer items-center justify-center rounded-full",l.selector?"h-4 w-4":"h-5 w-5"]),style:_({backgroundColor:e.activeColor}),onClick:z},[e.activeColor?(n(),x(v(w),{key:0,class:d(["text-c-btn",l.selector&&"p-0.5"]),icon:"Checkmark",size:"xs"},null,8,["class"])):b("",!0)],6)):b("",!0),s.value||!l.selector?(n(),k("div",{key:1,class:d(["color-selector flex flex-row items-center justify-between gap-1.5 space-x-1",l.selector?"h-4":"min-h-10 min-w-[296px]"])},[(n(),k(B,null,U(o,r=>u("div",{key:r.color,class:d(["flex cursor-pointer items-center justify-center rounded-full",l.selector?"h-4 w-4":"h-5 w-5"]),style:_({backgroundColor:r.color}),onClick:O=>E(r.color)},[e.activeColor===r.color&&!a.value?(n(),x(v(w),{key:0,class:d(["text-c-btn",l.selector&&"p-0.5"]),icon:"Checkmark",size:"xs"},null,8,["class"])):b("",!0)],14,q)),64)),t[2]||(t[2]=u("hr",{class:"border-ghost h-5 w-0.5 border-l"},null,-1)),u("label",{class:d(["z-10 flex cursor-pointer flex-row items-center justify-center gap-2 rounded-full",l.selector?"h-4 w-4":"h-5 w-5"]),style:_(h.value),onClick:F},[!c.value&&(e.activeColor===a.value||e.activeColor&&!o.some(r=>r.color===e.activeColor))?(n(),x(v(w),{key:0,class:"text-c-btn",icon:"Checkmark",size:"xs"})):b("",!0)],6)],2)):b("",!0)],64)),c.value?(n(),k("div",{key:1,class:d(["color-selector flex flex-1 items-center gap-2 rounded",l.selector?"h-4":"min-h-10"])},[u("span",{class:d(["absolute rounded-full border border-dashed",l.selector?"h-4 w-4":"h-5 w-5"])},null,2),u("span",{class:d(["z-[1] rounded-full",l.selector?"h-4 w-4":"h-5 w-5"]),style:_(h.value)},null,6),N(u("input",{ref_key:"customColorInputRef",ref:i,"onUpdate:modelValue":t[0]||(t[0]=r=>a.value=r),class:"w-full flex-1 border-transparent text-sm outline-none",placeholder:e.activeColor||"#000000",type:"text",onInput:t[1]||(t[1]=r=>E(a.value))},null,40,G),[[$,a.value]]),u("button",{class:"text-c-3 hover:bg-b-2 rounded-lg p-1.5",type:"button",onClick:F},[p(v(w),{icon:"Checkmark",size:"xs"})])],2)):b("",!0)]))}}),H={class:"flex flex-col gap-4"},le=V({__name:"EnvironmentColorModal",props:{state:{},selectedColor:{}},emits:["cancel","submit"],setup(g,{emit:y}){const l=g,C=y,a=f(""),i=s=>{a.value=s},c=()=>{C("submit",a.value),a.value=""};return(s,o)=>(n(),x(v(j),{size:"xxs",state:s.state,title:"Edit Environment Color"},{default:m(()=>[u("div",H,[p(T,{activeColor:a.value||l.selectedColor,class:"w-full p-1",onSelect:i},null,8,["activeColor"]),p(J,{onCancel:o[0]||(o[0]=h=>C("cancel")),onSubmit:c})])]),_:1},8,["state"]))}}),K={class:"flex items-start gap-2"},oe=V({__name:"EnvironmentModal",props:{state:{},activeWorkspaceCollections:{},collectionId:{}},emits:["cancel","submit"],setup(g,{emit:y}){const l=g,C=y,{events:a}=W(),i=f(""),c=f("#FFFFFF"),s=D(()=>[...l.activeWorkspaceCollections.filter(e=>e.info?.title!=="Drafts").map(e=>({id:e.uid,label:e.info?.title??"Untitled Collection"}))]),o=f(s.value.find(e=>e.id===l.collectionId)),{toast:h}=A(),F=e=>{c.value=e};I(()=>l.state.open,e=>{e&&(i.value="",c.value="#FFFFFF",l.collectionId?o.value=s.value.find(t=>t.id===l.collectionId):o.value=void 0)});const z=()=>{if(!i.value.trim()){h("Please enter a name before adding an environment.","error");return}if(!o.value?.id){h("Please select a collection before adding an environment.","error");return}C("submit",{name:i.value,color:c.value,type:o.value?.id==="global"?"global":"collection",collectionId:o.value?.id!=="global"?o.value?.id:void 0})},E=()=>{l.state.hide(),a.commandPalette.emit({commandName:"Create Collection"})};return(e,t)=>(n(),x(v(j),{bodyClass:"border-t-0 rounded-t-lg",size:"xs",state:e.state},{default:m(()=>[p(X,{disabled:!o.value||!i.value.trim(),onCancel:t[2]||(t[2]=r=>C("cancel")),onSubmit:z},{options:m(()=>[p(v(P),{modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=r=>o.value=r),options:s.value,placeholder:"Select Type"},{default:m(()=>[s.value.length>0?(n(),x(v(S),{key:0,class:"hover:bg-b-2 max-h-8 w-fit justify-between gap-1 p-2 text-xs",variant:"outlined"},{default:m(()=>[u("span",{class:d(o.value?"text-c-1":"text-c-3")},R(o.value?o.value.label:"Select Collection"),3),p(v(w),{class:"text-c-3",icon:"ChevronDown",size:"xs"})]),_:1})):(n(),x(v(S),{key:1,class:"hover:bg-b-2 max-h-8 justify-between gap-1 p-2 text-xs",variant:"outlined",onClick:E},{default:m(()=>[...t[3]||(t[3]=[u("span",{class:"text-c-1"},"Create Collection",-1)])]),_:1}))]),_:1},8,["modelValue","options"])]),submit:m(()=>[...t[4]||(t[4]=[L(" Add Environment ",-1)])]),default:m(()=>[u("div",K,[p(T,{activeColor:c.value,class:"peer",selector:"",onSelect:F},null,8,["activeColor"]),p(Z,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=r=>i.value=r),class:"-mt-[.5px] !p-0 peer-has-[.color-selector]:hidden",placeholder:"Environment name"},null,8,["modelValue"])])]),_:1},8,["disabled"])]),_:1},8,["state"]))}});export{oe as J,le as M};
